---
- name: Ensure several users exist on origin server
  hosts: origin
  become: false
  gather_facts: false
  tasks:
  - name: Generate users list
    ansible.builtin.import_tasks: helper/generate_test_data.yml
    run_once: true
    delegate_to: localhost
    vars:
      user_count: 50

  - name: Ensure users are present
    freeipa.ansible_freeipa.ipauser:
      ipaadmin_password: "{{ ipaadmin_password | default('SomeADMINpassword') }}"
      users: "{{ user_list }}"
      state: present
...
